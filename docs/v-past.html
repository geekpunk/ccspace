<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CCAS Band Explorer</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=JetBrains+Mono:wght@400;700&display=swap');

    body {
      font-family: 'Inter', sans-serif;
      background-color: #0a0a0a;
      color: #ededed;
    }

    .font-mono {
      font-family: 'JetBrains+Mono', monospace;
    }

    .custom-scrollbar::-webkit-scrollbar {
      width: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
      background: transparent;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #262626;
      border-radius: 10px;
    }

    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #404040;
    }

    input[type=range] {
      -webkit-appearance: none;
      pointer-events: none;
      background: transparent;
    }

    input[type=range]::-webkit-slider-thumb {
      pointer-events: all;
      cursor: pointer;
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      box-shadow: 0 0 12px rgba(234, 88, 12, 0.6);
      border: none;
    }

    input[type=range]::-moz-range-thumb {
      pointer-events: all;
      cursor: pointer;
      width: 20px;
      height: 20px;
      background: white;
      border: none;
      border-radius: 50%;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    @keyframes slideInUp {
      from {
        transform: translateY(1rem);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(2rem);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .animate-fade-in {
      animation: fadeIn 0.4s ease-out forwards;
    }

    .animate-slide-up {
      animation: slideInUp 0.4s ease-out forwards;
    }

    .animate-slide-right {
      animation: slideInRight 0.4s ease-out forwards;
    }
  </style>
</head>

<body class="selection:bg-orange-500/30 overflow-x-hidden">
  <div id="app">
    <!-- Loading State -->
    <div id="loading-screen" class="min-h-screen flex flex-col items-center justify-center">
      <div class="animate-spin text-orange-500 mb-4">
        <i data-lucide="refresh-cw" class="w-10 h-10"></i>
      </div>
      <h2 class="text-xl font-bold">Synchronizing Archive...</h2>
      <p class="text-neutral-500 text-sm mt-2">Connecting to Baltimore community history.</p>
    </div>

    <!-- Error State -->
    <div id="error-screen" class="hidden min-h-screen flex flex-col items-center justify-center p-4">
      <div class="bg-neutral-900 border border-neutral-800 rounded-3xl p-12 text-center shadow-2xl">
        <i data-lucide="alert-circle" class="w-12 h-12 text-red-500 mx-auto mb-6"></i>
        <h2 class="text-2xl font-bold mb-4">Database Offline</h2>
        <p id="error-message" class="text-neutral-400 mb-8 leading-relaxed max-w-sm mx-auto text-sm"></p>
        <button onclick="fetchData()"
          class="bg-orange-600 text-white px-8 py-3 rounded-full font-bold hover:bg-orange-500 transition-all">
          Retry Connection
        </button>
      </div>
    </div>

    <!-- Main App Interface -->
    <div id="main-interface" class="hidden min-h-screen">
      <!-- Dynamic Header -->
      <header
        class="border-b border-neutral-800 bg-neutral-900/50 backdrop-blur sticky top-0 z-30 h-16 flex items-center">
        <div class="max-w-4xl mx-auto px-4 w-full flex items-center justify-between">
          <div class="flex items-center gap-4">
            <button id="back-button" onclick="goBack()"
              class="hidden p-2 -ml-2 hover:bg-neutral-800 rounded-full text-orange-500 transition-colors">
              <i data-lucide="arrow-left" class="w-6 h-6"></i>
            </button>
            <div class="flex items-center gap-3">
              <div class="bg-orange-600 p-1.5 rounded-md hidden sm:block text-white">
                <i data-lucide="history" class="w-4.5 h-4.5"></i>
              </div>
              <h1 id="header-title" class="font-bold tracking-tight text-lg text-white">CCAS Archive</h1>
            </div>
          </div>

          <div id="search-container" class="relative flex-1 max-w-[240px] ml-4">
            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-neutral-500 w-4 h-4"></i>
            <input type="text" id="search-input" oninput="handleSearch(this.value)" placeholder="Find a band..."
              class="w-full bg-neutral-800 border-neutral-700 rounded-full py-1.5 pl-9 pr-4 text-sm text-white focus:outline-none focus:ring-2 focus:ring-orange-500/50 transition-all">
          </div>
        </div>
      </header>

      <main class="max-w-4xl mx-auto px-4 py-8">
        <!-- Directory View -->
        <div id="directory-view" class="space-y-8 animate-slide-up">
          <section class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <div class="bg-neutral-900 border border-neutral-800 p-6 rounded-2xl">
              <p class="text-neutral-500 text-[10px] font-bold uppercase mb-1 tracking-wider">Historical Record</p>
              <p id="stat-total-shows" class="text-3xl font-mono text-orange-500 font-bold">0</p>
              <p class="text-xs text-neutral-400">Total Shows</p>
            </div>
            <div class="bg-neutral-900 border border-neutral-800 p-6 rounded-2xl">
              <p class="text-neutral-500 text-[10px] font-bold uppercase mb-1 tracking-wider">Artist Roster</p>
              <p id="stat-total-bands" class="text-3xl font-mono text-orange-500 font-bold">0</p>
              <p class="text-xs text-neutral-400">Unique Acts</p>
            </div>
            <div class="bg-neutral-900 border border-neutral-800 p-6 rounded-2xl col-span-2 md:col-span-1">
              <p class="text-neutral-500 text-[10px] font-bold uppercase mb-1 tracking-wider">Timeline</p>
              <p class="text-3xl font-mono text-neutral-400 font-bold">2002–15</p>
              <p class="text-xs text-neutral-400">Archived Era</p>
            </div>
          </section>

          <!-- Pie Chart -->
          <section class="bg-neutral-900 border border-neutral-800 rounded-3xl overflow-hidden relative group">
            <div class="absolute top-6 left-6 flex items-center gap-2">
              <i data-lucide="pie-chart" class="w-4 h-4 text-orange-500"></i>
              <h3 class="text-xs font-bold text-neutral-300 uppercase tracking-widest">Performances Share</h3>
            </div>
            <div id="pie-chart-container"
              class="flex flex-col md:flex-row items-center justify-center gap-8 p-6 min-h-[300px]">
              <!-- SVG injected via JS -->
            </div>
          </section>

          <!-- Filter Slider -->
          <section class="bg-neutral-900 border border-neutral-800 p-6 rounded-3xl space-y-6">
            <div class="flex items-center justify-between mb-2">
              <div class="flex items-center gap-2">
                <i data-lucide="sliders-horizontal" class="w-4 h-4 text-orange-500"></i>
                <h3 class="text-xs font-bold text-neutral-300 uppercase tracking-widest">Filter by Appearances</h3>
              </div>
              <div id="range-label"
                class="bg-orange-600/10 text-orange-500 px-3 py-1 rounded-full font-mono text-xs border border-orange-500/20">
                Range: 1 — 50 Shows
              </div>
            </div>

            <div class="relative h-12 flex items-center px-4">
              <div class="absolute left-4 right-4 h-1.5 bg-orange-950 rounded-full border border-orange-900/50"></div>
              <div id="range-ticks" class="absolute inset-x-4 h-full pointer-events-none"></div>
              <div id="range-highlight" class="absolute h-1.5 bg-orange-600 rounded-full transition-all z-10"></div>
              <div class="relative w-full h-full flex items-center">
                <input type="range" id="min-slider" min="1" max="50" step="1" value="1"
                  oninput="updateRange('min', this.value)" class="absolute w-full h-full z-20">
                <input type="range" id="max-slider" min="1" max="50" step="1" value="50"
                  oninput="updateRange('max', this.value)" class="absolute w-full h-full z-30">
              </div>
            </div>

            <div class="flex justify-between text-[10px] text-neutral-600 font-mono px-2 pt-2">
              <span>1 SHOW</span>
              <span id="max-tick-label">50 SHOWS</span>
            </div>
          </section>

          <!-- List Container -->
          <section class="space-y-4">
            <div class="flex items-center justify-between px-2">
              <div class="flex items-center gap-2">
                <i data-lucide="bar-chart-3" class="w-4 h-4 text-orange-500"></i>
                <h2 id="list-title" class="text-sm font-bold uppercase tracking-[0.2em] text-neutral-500">Artist
                  Directory</h2>
              </div>
              <span id="pagination-info" class="text-[10px] font-mono text-neutral-600"></span>
            </div>

            <div id="band-list" class="grid grid-cols-1 sm:grid-cols-2 gap-2">
              <!-- Items injected via JS -->
            </div>

            <div id="pagination-controls" class="flex items-center justify-center gap-4 py-8">
              <!-- Buttons injected via JS -->
            </div>
          </section>
        </div>

        <!-- Detail View -->
        <div id="detail-view" class="hidden animate-slide-right">
          <section class="py-8 border-b border-neutral-800">
            <h2 id="detail-band-name"
              class="text-4xl md:text-6xl font-black italic uppercase tracking-tighter text-orange-500 mb-4 leading-none break-words">
            </h2>
            <div class="flex flex-wrap gap-4 items-center">
              <span id="detail-stat-appearances"
                class="px-3 py-1 bg-neutral-900 border border-neutral-800 rounded-full text-xs font-mono text-neutral-400 flex items-center gap-2">
                <i data-lucide="calendar" class="w-3 h-3 text-orange-500"></i>
                <span>0 appearances</span>
              </span>
              <span class="text-xs text-neutral-500 font-medium uppercase tracking-wider">CCAS DIY Archive • Baltimore
                MD</span>
            </div>
          </section>

          <section id="detail-timeline" class="space-y-6 pt-10">
            <!-- Timeline items injected via JS -->
          </section>

          <div class="pt-12 flex justify-center pb-20">
            <button onclick="goBack()"
              class="flex items-center gap-2 px-8 py-3 bg-neutral-900 hover:bg-neutral-800 border border-neutral-800 rounded-full text-sm font-bold text-neutral-400 hover:text-white transition-all shadow-xl">
              <i data-lucide="arrow-left" class="w-4 h-4"></i>
              Back to Directory
            </button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- Backdrop Gradients -->
  <div class="fixed inset-0 -z-10 pointer-events-none opacity-20">
    <div class="absolute top-0 right-0 w-96 h-96 bg-orange-600 rounded-full blur-[128px] -mr-48 -mt-48"></div>
    <div class="absolute bottom-0 left-0 w-96 h-96 bg-neutral-800 rounded-full blur-[128px] -ml-48 -mb-48"></div>
  </div>

  <script>
    // State
    let shows = [];
    let allBands = [];
    let filteredBands = [];
    let searchTerm = '';
    let currentPage = 1;
    let itemsPerPage = 48;
    let range = { min: 1, max: 1 };
    let absoluteMax = 1;

    // Constants
    const COLORS = ['#ea580c', '#f97316', '#fb923c', '#fdba74', '#fed7aa', '#ffedd5', '#7c2d12', '#431407'];

    // Initial Load
    async function fetchData() {
      document.getElementById('loading-screen').classList.remove('hidden');
      document.getElementById('error-screen').classList.add('hidden');
      document.getElementById('main-interface').classList.add('hidden');

      try {
        // Since this might run in environments where direct cross-origin fetch is blocked,
        // we'll attempt it but provide a mock/placeholder if it fails or use the uploaded file logic.
        const response = await fetch('https://ccspace.org/past.html');
        if (!response.ok) throw new Error('Could not reach the CCAS server.');
        const html = await response.text();
        parseData(html);
      } catch (err) {
        console.error(err);
        document.getElementById('error-message').textContent = "Connection to ccspace.org was blocked by the browser. You may need to run this from a local server or proxy to fetch live data.";
        document.getElementById('loading-screen').classList.add('hidden');
        document.getElementById('error-screen').classList.remove('hidden');
      }
    }

    function parseData(htmlString) {
      const parser = new DOMParser();
      const doc = parser.parseFromString(htmlString, 'text/html');
      const showsArray = [];
      const pTags = doc.querySelectorAll('.text p');

      let currentYear = "Unknown";

      pTags.forEach(p => {
        const text = p.textContent.trim();
        if (text.match(/^20\d\d$/)) {
          currentYear = text;
          return;
        }
        if (text.match(/^\d+\./)) {
          const lines = p.innerHTML.split(/<br\s*\/?>/gi).map(l => {
            const div = document.createElement('div');
            div.innerHTML = l;
            return div.textContent.trim();
          }).filter(l => l.length > 0);

          if (lines.length > 0) {
            const idAndDate = lines[0];
            const idMatch = idAndDate.match(/^(\d+)\./);
            const id = idMatch ? idMatch[1] : null;
            const date = idAndDate.replace(/^\d+\.\s+/, '');

            const bands = lines.slice(1).filter(l =>
              !l.startsWith('-') && !l.startsWith('(') &&
              !l.toLowerCase().includes('benefit') && !l.toLowerCase().includes('art show')
            );

            const notes = lines.slice(1).filter(l =>
              l.startsWith('-') || l.startsWith('(') ||
              l.toLowerCase().includes('benefit') || l.toLowerCase().includes('opening')
            );

            if (bands.length > 0) {
              showsArray.push({
                id, year: currentYear, date,
                fullDate: `${date}, ${currentYear}`,
                bands: bands.map(b => b.trim()).filter(b => b.length > 0),
                notes: notes.join(' ')
              });
            }
          }
        }
      });

      shows = showsArray;
      processStats();
      initApp();
    }

    function processStats() {
      const bandMap = {};
      shows.forEach(show => {
        show.bands.forEach(band => {
          const name = band.trim();
          if (!bandMap[name]) {
            bandMap[name] = { name, count: 0, shows: [] };
          }
          bandMap[name].count++;
          bandMap[name].shows.push(show);
        });
      });

      allBands = Object.values(bandMap).sort((a, b) => b.count - a.count);
      absoluteMax = Math.max(...allBands.map(b => b.count));
      range.max = absoluteMax;

      // Sync slider UI
      const minS = document.getElementById('min-slider');
      const maxS = document.getElementById('max-slider');
      minS.max = absoluteMax;
      maxS.max = absoluteMax;
      maxS.value = absoluteMax;
      document.getElementById('max-tick-label').textContent = `${absoluteMax} SHOWS`;

      updateFilteredBands();
    }

    function updateFilteredBands() {
      filteredBands = allBands.filter(b => {
        const matchesSearch = b.name.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesRange = b.count >= range.min && b.count <= range.max;
        return matchesSearch && matchesRange;
      });
      currentPage = 1;
      render();
    }

    // UI Handlers
    function handleSearch(val) {
      searchTerm = val;
      updateFilteredBands();
    }

    function updateRange(type, val) {
      const v = parseInt(val);
      if (type === 'min') {
        range.min = Math.min(v, range.max);
        document.getElementById('min-slider').value = range.min;
      } else {
        range.max = Math.max(v, range.min);
        document.getElementById('max-slider').value = range.max;
      }
      document.getElementById('range-label').textContent = `Range: ${range.min} — ${range.max} Shows`;
      updateFilteredBands();
    }

    function selectBand(bandName) {
      const band = allBands.find(b => b.name === bandName);
      if (!band) return;

      document.getElementById('directory-view').classList.add('hidden');
      document.getElementById('detail-view').classList.remove('hidden');
      document.getElementById('back-button').classList.remove('hidden');
      document.getElementById('search-container').classList.add('hidden');
      document.getElementById('header-title').textContent = "Artist History";

      // Populate Detail
      document.getElementById('detail-band-name').textContent = band.name;
      document.getElementById('detail-stat-appearances').querySelector('span').textContent = `${band.count} total appearances`;

      const timeline = document.getElementById('detail-timeline');
      timeline.innerHTML = band.shows.map(show => `
                <div class="relative pl-8 border-l-2 border-neutral-800 pb-12 last:pb-0 group">
                    <div class="absolute -left-[11px] top-1 w-5 h-5 bg-neutral-950 border-4 border-neutral-800 rounded-full group-hover:border-orange-600 transition-colors shadow-sm"></div>
                    <div class="space-y-4">
                        <div class="flex flex-col">
                            <span class="text-orange-500 font-mono text-xs font-bold uppercase tracking-widest mb-1">${show.fullDate}</span>
                            <span class="text-neutral-500 text-[10px] font-mono uppercase tracking-widest">Show ID #${show.id}</span>
                        </div>
                        <div class="bg-neutral-900/80 border border-neutral-800 p-6 rounded-2xl group-hover:bg-neutral-900 transition-colors">
                            <p class="text-[10px] font-bold text-neutral-600 uppercase tracking-widest mb-3">Lineup</p>
                            <div class="flex flex-wrap gap-2">
                                ${show.bands.map(b => `
                                    <span class="px-3 py-1.5 rounded-lg text-sm border font-medium ${b.toLowerCase() === band.name.toLowerCase() ? 'bg-orange-500/10 border-orange-500 text-orange-500' : 'bg-neutral-950/50 border-neutral-800 text-neutral-400'}">
                                        ${b}
                                    </span>
                                `).join('')}
                            </div>
                            ${show.notes ? `
                                <div class="mt-6 pt-4 border-t border-neutral-800 flex items-start gap-3">
                                    <i data-lucide="music" class="w-3.5 h-3.5 text-neutral-700 mt-0.5"></i>
                                    <p class="text-xs italic text-neutral-500 leading-relaxed">${show.notes}</p>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                </div>
            `).join('');

      window.scrollTo({ top: 0, behavior: 'smooth' });
      lucide.createIcons();
    }

    function goBack() {
      document.getElementById('directory-view').classList.remove('hidden');
      document.getElementById('detail-view').classList.add('hidden');
      document.getElementById('back-button').classList.add('hidden');
      document.getElementById('search-container').classList.remove('hidden');
      document.getElementById('header-title').textContent = "CCAS Archive";
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function initApp() {
      document.getElementById('loading-screen').classList.add('hidden');
      document.getElementById('main-interface').classList.remove('hidden');
      document.getElementById('stat-total-shows').textContent = shows.length;
      document.getElementById('stat-total-bands').textContent = allBands.length;

      renderTicks();
      renderPie();
      render();
      lucide.createIcons();
    }

    function renderTicks() {
      const container = document.getElementById('range-ticks');
      container.innerHTML = '';
      const step = absoluteMax > 30 ? 10 : 5;
      for (let i = 0; i <= absoluteMax; i += step) {
        if (i === 0) continue;
        const tick = document.createElement('div');
        tick.className = "absolute w-[1px] h-3 bg-neutral-700/50 -translate-y-1/2 top-1/2";
        tick.style.left = `calc(${(i - 1) / (absoluteMax - 1) * 100}%)`;
        tick.innerHTML = `<span class="absolute top-4 left-1/2 -translate-x-1/2 text-[8px] text-neutral-600 font-mono">${i}</span>`;
        container.appendChild(tick);
      }
    }

    function renderPie() {
      const container = document.getElementById('pie-chart-container');
      const data = allBands.slice(0, 8);
      const total = data.reduce((a, c) => a + c.count, 0);

      let cumulativePercent = 0;
      const getCoords = (p) => [Math.cos(2 * Math.PI * p), Math.sin(2 * Math.PI * p)];

      const paths = data.map((slice, i) => {
        const [sx, sy] = getCoords(cumulativePercent);
        const percent = slice.count / total;
        cumulativePercent += percent;
        const [ex, ey] = getCoords(cumulativePercent);
        const large = percent > 0.5 ? 1 : 0;

        return `<path 
                    d="M ${sx} ${sy} A 1 1 0 ${large} 1 ${ex} ${ey} L 0 0" 
                    fill="${COLORS[i % COLORS.length]}" 
                    class="cursor-pointer hover:opacity-80 transition-opacity" 
                    onclick="selectBand('${slice.name.replace(/'/g, "\\'")}')"
                ><title>${slice.name}: ${slice.count} shows</title></path>`;
      }).join('');

      const legend = data.map((slice, i) => `
                <div class="flex items-center gap-3 cursor-pointer group" onclick="selectBand('${slice.name.replace(/'/g, "\\'")}')">
                    <div class="w-4 h-4 rounded-sm" style="background-color: ${COLORS[i % COLORS.length]}"></div>
                    <div class="flex flex-col">
                        <span class="text-sm font-bold truncate max-w-[140px] group-hover:text-orange-500 transition-colors">${slice.name}</span>
                        <span class="text-[10px] text-neutral-500 font-mono">${slice.count} shows (${Math.round(slice.count / total * 100)}%)</span>
                    </div>
                </div>
            `).join('');

      container.innerHTML = `
                <svg viewBox="-1.1 -1.1 2.2 2.2" class="w-48 h-48 md:w-64 md:h-64 -rotate-90 drop-shadow-2xl">
                    ${paths}
                </svg>
                <div class="grid grid-cols-2 gap-x-8 gap-y-3">
                    ${legend}
                </div>
            `;
    }

    function render() {
      // Update Range Highlight
      const highlight = document.getElementById('range-highlight');
      const left = ((range.min - 1) / (absoluteMax - 1)) * 100;
      const right = 100 - (((range.max - 1) / (absoluteMax - 1)) * 100);
      highlight.style.left = `calc(16px + ${left}% * (100% - 32px) / 100)`;
      highlight.style.right = `calc(16px + ${right}% * (100% - 32px) / 100)`;

      // Update List
      const list = document.getElementById('band-list');
      const start = (currentPage - 1) * itemsPerPage;
      const pageData = filteredBands.slice(start, start + itemsPerPage);

      if (pageData.length === 0) {
        list.innerHTML = `
                    <div class="col-span-full py-20 text-center bg-neutral-900/50 rounded-3xl border border-dashed border-neutral-800">
                        <i data-lucide="music" class="w-10 h-10 text-neutral-700 mx-auto mb-4"></i>
                        <p class="text-neutral-500 text-sm px-4">No bands match your current search and show-count criteria.</p>
                        <button onclick="resetFilters()" class="mt-4 text-orange-500 text-xs font-bold hover:underline">Reset All Filters</button>
                    </div>
                `;
      } else {
        list.innerHTML = pageData.map(band => `
                    <button onclick="selectBand('${band.name.replace(/'/g, "\\'")}')" class="group flex items-center justify-between p-4 bg-neutral-900 border border-neutral-800 rounded-2xl hover:border-orange-500/50 hover:bg-neutral-800/50 transition-all text-left">
                        <span class="font-bold truncate text-neutral-200 group-hover:text-white">${band.name}</span>
                        <div class="flex items-center gap-3 shrink-0">
                            <span class="text-[10px] font-mono bg-neutral-800 px-2 py-1 rounded text-neutral-400 group-hover:bg-orange-500/10 group-hover:text-orange-500 transition-colors">${band.count}x</span>
                            <i data-lucide="chevron-right" class="w-4 h-4 text-neutral-700 group-hover:text-orange-500 translate-x-0 group-hover:translate-x-1 transition-all"></i>
                        </div>
                    </button>
                `).join('');
      }

      // Pagination
      const totalPages = Math.ceil(filteredBands.length / itemsPerPage);
      const pagInfo = document.getElementById('pagination-info');
      pagInfo.textContent = `Showing ${Math.min(filteredBands.length, start + 1)} - ${Math.min(filteredBands.length, start + itemsPerPage)} of ${filteredBands.length}`;

      const pagControls = document.getElementById('pagination-controls');
      if (totalPages <= 1) {
        pagControls.innerHTML = '';
      } else {
        pagControls.innerHTML = `
                    <button onclick="changePage(-1)" ${currentPage === 1 ? 'disabled' : ''} class="p-2 bg-neutral-900 border border-neutral-800 rounded-full hover:bg-neutral-800 disabled:opacity-30 text-orange-500 transition-all"><i data-lucide="chevron-left" class="w-5 h-5"></i></button>
                    <div class="flex items-center gap-2 font-mono text-xs">
                        <span class="text-neutral-400">PAGE</span>
                        <span class="text-white font-bold">${currentPage}</span>
                        <span class="text-neutral-600">/</span>
                        <span class="text-neutral-500">${totalPages}</span>
                    </div>
                    <button onclick="changePage(1)" ${currentPage === totalPages ? 'disabled' : ''} class="p-2 bg-neutral-900 border border-neutral-800 rounded-full hover:bg-neutral-800 disabled:opacity-30 text-orange-500 transition-all"><i data-lucide="chevron-right" class="w-5 h-5"></i></button>
                `;
      }
      lucide.createIcons();
    }

    function changePage(dir) {
      currentPage += dir;
      window.scrollTo({ top: 400, behavior: 'smooth' });
      render();
    }

    function resetFilters() {
      searchTerm = '';
      document.getElementById('search-input').value = '';
      range = { min: 1, max: absoluteMax };
      document.getElementById('min-slider').value = 1;
      document.getElementById('max-slider').value = absoluteMax;
      document.getElementById('range-label').textContent = `Range: 1 — ${absoluteMax} Shows`;
      updateFilteredBands();
    }

    // Start App
    window.onload = fetchData;
  </script>
</body>

</html>